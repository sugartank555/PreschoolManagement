@model PreschoolManagement.Models.Student
@{
    ViewData["Title"] = "Chi tiết con em";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2 class="mb-3">Chi tiết con em</h2>

<div class="card mb-4">
    <div class="card-body">
        <dl class="row mb-0">
            <dt class="col-sm-3">Mã học sinh</dt>
            <dd class="col-sm-9">@Model.Code</dd>

            <dt class="col-sm-3">Họ tên</dt>
            <dd class="col-sm-9">@Model.FullName</dd>

            <dt class="col-sm-3">Ngày sinh</dt>
            <dd class="col-sm-9">@Model.BirthDate.ToString("dd/MM/yyyy")</dd>

            <dt class="col-sm-3">Giới tính</dt>
            <dd class="col-sm-9">@Model.Gender</dd>

            <dt class="col-sm-3">Lớp</dt>
            <dd class="col-sm-9">@Model.ClassRoom?.Name</dd>
        </dl>
    </div>
</div>

<h4 class="mb-3">Hóa đơn học phí</h4>

<div class="table-responsive">
    <table class="table table-hover align-middle">
        <thead class="table-light">
            <tr>
                <th style="width:120px">Tháng</th>
                <th style="width:140px">Số tiền</th>
                <th style="width:120px">Trạng thái</th>
                <th style="width:140px">Ngày tạo</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.FeeInvoices == null || !Model.FeeInvoices.Any())
            {
                <tr>
                    <td colspan="4" class="text-center text-muted py-3">Chưa có hóa đơn nào.</td>
                </tr>
            }
            else
            {
                foreach (var f in Model.FeeInvoices.OrderByDescending(x => x.Month))
                {
                    <tr>
                        <td>@f.Month</td>
                        <td>@f.Amount.ToString("N0") đ</td>
                        <td>
                            @if (f.Status == "Paid")
                            {
                                <span class="badge bg-success">Đã thanh toán</span>
                            }
                            else
                            {
                                <span class="badge bg-warning text-dark">Chưa thanh toán</span>
                            }
                        </td>
                        <td>@f.CreatedAt.ToString("dd/MM/yyyy")</td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>

<div class="mt-3">
    <a asp-controller="Children" asp-action="Index" class="btn btn-outline-secondary">Quay lại</a>
</div>
